(()=>{"use strict";$(document).ready((function(){$(".btn_select_gallery").rvMedia({onSelectFiles:function(a){var l=$(".list-photos-gallery .photo-gallery-item:last-child").data("id")+1;$.each(a,(function(e,t){$(".list-photos-gallery .row").append('<div class="col-md-2 col-sm-3 col-4 photo-gallery-item" data-id="'+(l+e)+'" data-img="'+t.url+'" data-description=""><div class="gallery_image_wrapper"><img src="'+t.thumb+'" /></div></div>')})),e(),t(),$(".reset-gallery").removeClass("hidden")}});var e=function(){var e=document.getElementById("list-photos-items");Sortable.create(e,{group:"galleries",sort:!0,delay:0,disabled:!1,store:null,animation:150,handle:".photo-gallery-item",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dataIdAttr:"data-id",forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onEnd:function(){t()}})};e();var t=function(){var e=[];$.each($(".photo-gallery-item"),(function(t,a){$(a).data("id",t),e.push({img:$(a).data("img"),description:$(a).data("description")})})),$("#gallery-data").val(JSON.stringify(e))},a=$(".list-photos-gallery"),l=$("#edit-gallery-item");$(".reset-gallery").on("click",(function(e){e.preventDefault(),$(".list-photos-gallery .photo-gallery-item").remove(),t(),$(this).addClass("hidden")})),a.on("click",".photo-gallery-item",(function(){var e=$(this).data("id");$("#delete-gallery-item").data("id",e),$("#update-gallery-item").data("id",e),$("#gallery-item-description").val($(this).data("description")),l.modal("show")})),l.on("click","#delete-gallery-item",(function(e){e.preventDefault(),l.modal("hide"),a.find(".photo-gallery-item[data-id="+$(this).data("id")+"]").remove(),t(),0===a.find(".photo-gallery-item").length&&$(".reset-gallery").addClass("hidden")})),l.on("click","#update-gallery-item",(function(e){e.preventDefault(),l.modal("hide"),a.find(".photo-gallery-item[data-id="+$(this).data("id")+"]").data("description",$("#gallery-item-description").val()),t()}))}))})();
